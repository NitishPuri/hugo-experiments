{{ if .Params.use_p5 }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js" integrity="sha512-N4kV7GkNv7QR7RX9YF/olywyIgIwNvfEe2nZtfyj73HdjCUkAfOBDbcuJ/cTaN04JKRnw1YG1wnUyNKMsNgg3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{{ end }}

<script type="text/javascript">
    // Args : {w, h, renderer, statsFunc}
    function createCanvasCustom(opt = {}) {
        let sketch_holder = select('#sketch-holder');
        opt.w = opt.w || sketch_holder.width
        opt.h = opt.h || windowHeight - 60
        let cnv = createCanvas(opt.w, opt.h, opt.renderer)
        cnv.parent('sketch-holder')
        return cnv
    }
    function windowResized() {
        let canvas = select('.p5Canvas');
        if(fullscreen()) {
            canvas.parent('sketch-holder-fs')
            resizeCanvas(window.innerWidth, window.innerHeight)
            document.body.scrollTop = 0
            document.body.style.overflow = 'hidden';
        } else {
            canvas.parent('sketch-holder')
            let sketch_holder = select('#sketch-holder');
            resizeCanvas(sketch_holder.width, windowHeight - 60)
            document.body.style.overflow = 'visible';
        }
    }
    function showStats(func) {
        let fr = createP()
        fr.class('stats')
        func = func || (() => "FPS : " + floor(frameRate()))
        let intervalId = setInterval(() => {
            fr.html(func())
        }, 500)
        let showFr = true;
        document.addEventListener('keydown', (ev) => {
            if (ev.key === 'f' || ev.key === 'F') {
                if (showFr) fr.hide()
                else fr.show()
                showFr = !showFr
            }
        })
        return intervalId

    }
    // Resolve the URL of resource located in data directory!!
    function resolveUrl(url) {
        // return '/ProcessingExperiments' + url
        return url
    }
</script>

{{ range $script := .Params.scripts }}
    <script src="{{ $script }}"></script>
{{ end }}
